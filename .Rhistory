install.packages("phangorn")
getwd()
# selecting species in the different types os soils from the Caatinga
setwd("C:/Users/patri/Google Drive/Papers/trepadeiras caatinga")
climbers<-readRDS(file="allclimbers.Rdata")
View(climbers)
library(magrittr)
library(dismo
library(CoordinateCleaner)
library(monographaR)
library(dplyr)
library(viridis)
library(RColorBrewer)
library(taxize)
data(wrld_simpl)
#library(CoordinateCleaner)
climbers <- subset(climbers, !is.na(Longitude) & !is.na(Latitude))
cleaned_points <- cc_cap(climbers, lon="Longitude", lat="Latitude", species ="Species")
cleaned_points <- cc_cen(cleaned_points, lon = "Longitude", lat = "Latitude", species ="Species")
cleaned_points <- cc_dupl(cleaned_points, lon="Longitude", lat="Latitude", species ="Species")
cleaned_points <- cc_equ(cleaned_points, lon="Longitude", lat="Latitude")
cleaned_points <- cc_inst(cleaned_points, lon="Longitude", lat="Latitude", species ="Species")
cleaned_points <- cc_val(cleaned_points, lon="Longitude", lat="Latitude")
climbers <- cc_sea(cleaned_points, lon="Longitude", lat="Latitude")
library(CoordinateCleaner)
cleaned_points <- cc_cap(climbers, lon="Longitude", lat="Latitude", species ="Species")
cleaned_points <- cc_cen(cleaned_points, lon = "Longitude", lat = "Latitude", species ="Species")
cleaned_points <- cc_dupl(cleaned_points, lon="Longitude", lat="Latitude", species ="Species")
cleaned_points <- cc_equ(cleaned_points, lon="Longitude", lat="Latitude")
cleaned_points <- cc_inst(cleaned_points, lon="Longitude", lat="Latitude", species ="Species")
cleaned_points <- cc_val(cleaned_points, lon="Longitude", lat="Latitude")
climbers <- cc_sea(cleaned_points, lon="Longitude", lat="Latitude")
mapallclimbers<-mapDiversity(climbers, resolution = 1, plot = TRUE,
plot.with.grid = F, legend = T,
export = F, alpha=1,
col=hcl.colors(50, palette = "inferno",rev=T))
library(raster)
library(rgdal)
# transforming the object in spatial polygons dataframe
coordinates(climbers)<-c(2,3)
plot(climbers, add=T)
dev.off()
# reading the shapefile
eco <- readOGR("ecorregioes_seminario2001.shp")
# reading the shapefile
eco <- readOGR("ecorregioes_seminario2001.shx")
# reading the shapefile
eco <- readOGR("biomas_caatinga_ibge_2004.shp")
# reading the shapefile
caatinga <- readOGR("biomas_caatinga_ibge_2004.shp")
rm(eco)
#recortando variaveis pra caatinga
caatinga2 <- stack(mask(crop(climbers,caatinga),caatinga))
env<-getData('worldclim', download=T, var='bio', res=10)
#recortando variaveis pra caatinga
caatinga2 <- stack(mask(crop(mapallclimbers,caatinga),caatinga))
plot(caatinga2)
mapallclimbers<-mapDiversity(climbers, resolution = 1/6, plot = TRUE,
plot.with.grid = F, legend = T,
export = F, alpha=1,
col=hcl.colors(50, palette = "inferno",rev=T))
# reading the data
climbers<-readRDS(file="allclimbers.Rdata") # previously cleaned distribution points
mapallclimbers<-mapDiversity(climbers, resolution = 1/6, plot = TRUE,
plot.with.grid = F, legend = T,
export = F, alpha=1,
col=hcl.colors(50, palette = "inferno",rev=T))
dev.off()
#recortando variaveis pra caatinga
caatinga2 <- stack(mask(crop(mapallclimbers,caatinga),caatinga))
plot(caatinga2)
plot(caatinga2, col=hcl.colors(50, palette = "inferno",rev=T))
# selecting species in the different types os soils from the Caatinga
setwd("C:/Users/patri/Google Drive/Papers/trepadeiras caatinga")
library(magrittr)
library(dismo)
library(CoordinateCleaner)
library(monographaR)
library(dplyr)
library(viridis)
library(RColorBrewer)
library(raster)
library(rgdal)
data(wrld_simpl)
setwd("C:/Users/patri/Google Drive/Papers/Diversificação/climbers")
library(lcvplants)
library(beepr)
library(phangorn)
library(ape)
library(dplyr)
library(arsenal)
library(tidyverse)
# reading the data
climbers<-read.csv("climber_database.csv", stringsAsFactors = F)
h<-readRDS(file="LCVP_climbers.Rdata")
accepted<-subset(h, Status=="accepted")
problems<-subset(h, Status!="accepted")
# counting genera of climbers
genera<-unique(accepted$Genus) # 689 generos, 100 a menos que o database original...
sppclimbers<-as.data.frame(table(unlist(accepted$Genus)))
colnames(sppclimbers)<-c("Genus", "Nr")
sppall<-readRDS(file="sppall.Rdata")
z<-sppall$Genus %in% sppclimbers$Genus
z<-as.numeric(which(z==F))
# excluding these genera from sppall
sppall2<-sppall[-z,]
sppall2<-sppall2[order(sppall2$Genus),]
rownames(sppall2)<-c(1:689)
sppclimbers<-sppclimbers[order(sppclimbers$Genus),]
percent<-data.frame(sppall2$Genus, c(sppclimbers$Nr/sppall2$Nr))
colnames(percent)<-c("Genus","perc_NT_spp")
results2<-readRDS(file="partialresults.Rdata")
View(results2)
View(results2)
View(climbers)
mechs<-subset(climbers, Genus==results2$Genus)[,4]
mechs<-subset(climbers, Genus==as.character(results2$Genus))[,4]
as.character(results2$Genus)
mechs<-subset(climbers, Genus==as.character(results2$Genus))
View(h)
View(accepted)
unique(climbers$Genus)
View(sppclimbers)
